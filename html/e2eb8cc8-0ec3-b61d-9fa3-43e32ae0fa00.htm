<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>UPNP.AddPortMapping Method </title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="AddPortMapping method" /><meta name="System.Keywords" content="UPNP.AddPortMapping method" /><meta name="Microsoft.Help.F1" content="Godot.UPNP.AddPortMapping" /><meta name="Microsoft.Help.Id" content="M:Godot.UPNP.AddPortMapping(System.Int32,System.Int32,System.String,System.String,System.Int32)" /><meta name="Description" content="Adds a mapping to forward the external port (between 1 and 65535) on the default gateway (see ) to the internal_port on the local machine for the given protocol proto (either TCP or UDP, with UDP being the default)." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Godot" /><meta name="file" content="e2eb8cc8-0ec3-b61d-9fa3-43e32ae0fa00" /><meta name="guid" content="e2eb8cc8-0ec3-b61d-9fa3-43e32ae0fa00" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.5.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">GodotSharpAPI<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/c7d41d90-59b4-4e80-d334-bd2586caedfd.htm" title="GodotSharpAPI" tocid="roottoc">GodotSharpAPI</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/c7d41d90-59b4-4e80-d334-bd2586caedfd.htm" title="Godot" tocid="c7d41d90-59b4-4e80-d334-bd2586caedfd">Godot</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/12414feb-231b-53d6-15bd-976cce134332.htm" title="UPNP Class" tocid="12414feb-231b-53d6-15bd-976cce134332">UPNP Class</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/95d49428-f21c-4ef6-a9e0-ab9e6a1bd58a.htm" title="UPNP Methods" tocid="95d49428-f21c-4ef6-a9e0-ab9e6a1bd58a">UPNP Methods</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e63ba909-4fca-2885-4bfb-0e19d122e095.htm" title="AddDevice Method " tocid="e63ba909-4fca-2885-4bfb-0e19d122e095">AddDevice Method </a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/e2eb8cc8-0ec3-b61d-9fa3-43e32ae0fa00.htm" title="AddPortMapping Method " tocid="e2eb8cc8-0ec3-b61d-9fa3-43e32ae0fa00">AddPortMapping Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/37da5e0c-fa87-98f0-21c5-d8b762a0fd9d.htm" title="ClearDevices Method " tocid="37da5e0c-fa87-98f0-21c5-d8b762a0fd9d">ClearDevices Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5b4eb7c4-47c9-a2f6-4131-f31db1ae7a0f.htm" title="DeletePortMapping Method " tocid="5b4eb7c4-47c9-a2f6-4131-f31db1ae7a0f">DeletePortMapping Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/63bfe6ff-1ff8-5224-1e71-d47cb2dc2f45.htm" title="Discover Method " tocid="63bfe6ff-1ff8-5224-1e71-d47cb2dc2f45">Discover Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5204ae1d-d4fb-b233-5167-494721ce802f.htm" title="GetDevice Method " tocid="5204ae1d-d4fb-b233-5167-494721ce802f">GetDevice Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/14429ceb-8288-f709-1f99-9c588c87b40e.htm" title="GetDeviceCount Method " tocid="14429ceb-8288-f709-1f99-9c588c87b40e">GetDeviceCount Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c4d876c8-aec0-00ed-a995-75073d5edc96.htm" title="GetDiscoverLocalPort Method " tocid="c4d876c8-aec0-00ed-a995-75073d5edc96">GetDiscoverLocalPort Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/583e783f-b5d8-8e56-4454-cb47ada2f5cd.htm" title="GetDiscoverMulticastIf Method " tocid="583e783f-b5d8-8e56-4454-cb47ada2f5cd">GetDiscoverMulticastIf Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a0665a5d-d0f4-9345-1cc1-0e977818a517.htm" title="GetGateway Method " tocid="a0665a5d-d0f4-9345-1cc1-0e977818a517">GetGateway Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4df2bf88-0458-c95e-ce8d-273eb821df8d.htm" title="IsDiscoverIpv6 Method " tocid="4df2bf88-0458-c95e-ce8d-273eb821df8d">IsDiscoverIpv6 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6a541053-725f-6194-ced8-8afe2d54145e.htm" title="QueryExternalAddress Method " tocid="6a541053-725f-6194-ced8-8afe2d54145e">QueryExternalAddress Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d3309bcd-e382-82ef-ad76-6493a3691cb9.htm" title="RemoveDevice Method " tocid="d3309bcd-e382-82ef-ad76-6493a3691cb9">RemoveDevice Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/9e209c13-71ae-dc96-c95b-74dc091a379e.htm" title="SetDevice Method " tocid="9e209c13-71ae-dc96-c95b-74dc091a379e">SetDevice Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a9b69aa3-38ab-cd86-2107-15d2da54e1f1.htm" title="SetDiscoverIpv6 Method " tocid="a9b69aa3-38ab-cd86-2107-15d2da54e1f1">SetDiscoverIpv6 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/23c698d4-a719-95d1-363c-9056d59da3c2.htm" title="SetDiscoverLocalPort Method " tocid="23c698d4-a719-95d1-363c-9056d59da3c2">SetDiscoverLocalPort Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d5e7d2c0-a3a7-716f-a23b-a1aa6b58b5be.htm" title="SetDiscoverMulticastIf Method " tocid="d5e7d2c0-a3a7-716f-a23b-a1aa6b58b5be">SetDiscoverMulticastIf Method </a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>UPNP<span id="LST9896C616_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST9896C616_0?cpp=::|nu=.");</script>AddPortMapping Method </h1></td></tr></table><span class="introStyle"></span> <div class="summary"><p>Adds a mapping to forward the external <span class="code">port</span> (between 1 and 65535) on the default gateway (see <a href="a0665a5d-d0f4-9345-1cc1-0e977818a517.htm">GetGateway<span id="LST9896C616_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST9896C616_1?cs=()|vb=|cpp=()|nu=()|fs=()");</script></a>) to the <span class="code">internal_port</span> on the local machine for the given protocol <span class="code">proto</span> (either <span class="code">TCP</span> or <span class="code">UDP</span>, with UDP being the default). If a port mapping for the given port and protocol combination already exists on that gateway device, this method tries to overwrite it. If that is not desired, you can retrieve the gateway manually with <a href="a0665a5d-d0f4-9345-1cc1-0e977818a517.htm">GetGateway<span id="LST9896C616_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST9896C616_2?cs=()|vb=|cpp=()|nu=()|fs=()");</script></a> and call <span class="selflink">AddPortMapping(Int32, Int32, String, String, Int32)</span> on it, if any.</p><p>If <span class="code">internal_port</span> is <span class="code">0</span> (the default), the same port number is used for both the external and the internal port (the <span class="code">port</span> value).</p><p>The description (<span class="code">desc</span>) is shown in some router UIs and can be used to point out which application added the mapping. The mapping's lease duration can be limited by specifying a <span class="code">duration</span> (in seconds). However, some routers are incompatible with one or both of these, so use with caution and add fallback logic in case of errors to retry without them if in doubt.</p><p>See <a href="1ccb1724-1d7a-5e11-b7f5-a3763f8ce281.htm">UPNP<span id="LST9896C616_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST9896C616_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>UPNPResult</a> for possible return values.</p></div><p> </p>
    <strong>Namespace:</strong> 
   <a href="c7d41d90-59b4-4e80-d334-bd2586caedfd.htm">Godot</a><br />
    <strong>Assembly:</strong>
   GodotSharp (in GodotSharp.dll) Version: 1.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EACA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="identifier">int</span> <span class="identifier">AddPortMapping</span>(
	<span class="identifier">int</span> <span class="parameter">port</span>,
	<span class="identifier">int</span> <span class="parameter">portInternal</span> = 0,
	<span class="identifier">string</span> <span class="parameter">desc</span> = "",
	<span class="identifier">string</span> <span class="parameter">proto</span> = "UDP",
	<span class="identifier">int</span> <span class="parameter">duration</span> = 0
)</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">port</span></dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank" rel="noopener noreferrer">System<span id="LST9896C616_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST9896C616_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br /><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[Missing &lt;param name="port"/&gt; documentation for "M:Godot.UPNP.AddPortMapping(System.Int32,System.Int32,System.String,System.String,System.Int32)"]</p></dd><dt><span class="parameter">portInternal</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank" rel="noopener noreferrer">System<span id="LST9896C616_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST9896C616_5?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br /><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[Missing &lt;param name="portInternal"/&gt; documentation for "M:Godot.UPNP.AddPortMapping(System.Int32,System.Int32,System.String,System.String,System.Int32)"]</p></dd><dt><span class="parameter">desc</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.string" target="_blank" rel="noopener noreferrer">System<span id="LST9896C616_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST9896C616_6?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>String</a><br /><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[Missing &lt;param name="desc"/&gt; documentation for "M:Godot.UPNP.AddPortMapping(System.Int32,System.Int32,System.String,System.String,System.Int32)"]</p></dd><dt><span class="parameter">proto</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.string" target="_blank" rel="noopener noreferrer">System<span id="LST9896C616_7"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST9896C616_7?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>String</a><br /><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[Missing &lt;param name="proto"/&gt; documentation for "M:Godot.UPNP.AddPortMapping(System.Int32,System.Int32,System.String,System.String,System.Int32)"]</p></dd><dt><span class="parameter">duration</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank" rel="noopener noreferrer">System<span id="LST9896C616_8"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST9896C616_8?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br /><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[Missing &lt;param name="duration"/&gt; documentation for "M:Godot.UPNP.AddPortMapping(System.Int32,System.Int32,System.String,System.String,System.Int32)"]</p></dd></dl><h4 class="subHeading">Return Value</h4>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank" rel="noopener noreferrer">Int32</a><br /><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[Missing &lt;returns&gt; documentation for "M:Godot.UPNP.AddPortMapping(System.Int32,System.Int32,System.String,System.String,System.Int32)"]</p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID2RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="12414feb-231b-53d6-15bd-976cce134332.htm">UPNP Class</a></div><div class="seeAlsoStyle"><a href="c7d41d90-59b4-4e80-d334-bd2586caedfd.htm">Godot Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>